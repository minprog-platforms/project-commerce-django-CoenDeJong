# SQL

## 19-11-2022
SQL is vorig blok vrij uitgebreid aan bod gekomen. Vandaar dat ik ervoor gekozen heb om enkel de lecture notes door te nemen. Niet alleen ging dit stukken sneller, voor mijn gevoel bleef het daarbij een stuk beter hangen. Ik denk omdat ik hierdoor mijn eigen tempo aan kan houden en daarom actiever leer. Voor het stuk over Django en SQL heb ik wel de lecture bekeken, om er zo zeker voor te zijn niets gemist te hebben.

# Commerce

## 9-12-2022
Restant van de dag heb ik gebruikt om aantekeningen te maken over Commerce en bekend te worden met de bestanden. Wellicht noemenswaardig is dat ik een waarschuwing in de terminal kreeg toen ik de commands runde van ‘Getting Started’. Yvette wist ook niet precies waar deze vandaan kwam, maar als het goed is staat alles juist om te kunnen beginnen.

## 10-12-2022
Ik ben begonnen met af te maken waar ik vorige dag mee bezig was, het samenvatten van de opdracht. Het enige dat me niet geheel duidelijk is, is of het nodig is om een watchlist te creëren en hoe dit dan te doen. Er zou dan namelijk een persoonspecifieke class worden gemaakt, alleen waarin worden dan de watchlists van de personen opgeslagen. Dit is iets wat ik het best morgen met de TA’s kan bespreken. Ik twijfel echter of ik daarom eerst doorga met Adventures of een begin maak met Commerce.

Daarna heb ik in de lecture notes gekeken welke informatie van toepassing is, op het eerste gezicht lijkt alles dat over Django gaat van belang voor het project. Ik heb daarom het laatste deel van de lecture notes nog zorgvuldig doorgenomen. Gedurende het lezen kwamen aan aantal vragen naar boven. Zo is het me onduidelijk waarvoor ‘int’ in “<int:flights>” voor staat. Verder werd het me duidelijk dat ik niet helemaal begrijp hoe de templates zijn opgebouwd (extend en de blocks). In het bijzonder vraag ik me af wat een app nou precies is en wanneer je een nieuwe definieert; zo maken ze in de lecture een nieuwe app voor user aan maar bij commerce hebben ze het over een ‘single app’. Waar ik niet uit ben gekomen zal ik maandag aan de TA’s vragen.

Vervolgens ben ik begonnen met het het document design. Aangezien ik gisteren een account had gemaakt, had ik een idee over hoe de website eruit ziet. Na het lezen van de specificaties en de understanding, heb ik een globaal beeld van hoe de website functioneert. Echter, ik merkte dat ik het erg lastig vond om de cardinale relaties tussen de classes te bepalen. Zo kan een user meerdere auctions hebben en heeft een auction meerdere users (seller + buyers) hebben. Zo denk ik dat er sprake is van een many-to-many relatie. Echter, ik weet niet of je dan ook kan stellen dat de overige relaties (zie class design) 1-to-many zijn of ook many-to-many. Zo hoort één bieding bij één auction, maar alle biedingen zullen tot één of meer auctions behoren.
Ook vind ik de theorie over de relaties lastig, de verschillen tussen de verschillende relaties is me niet helder geworden uit het gelinkte website-artikel. Ik hoop dus maandag wat duidelijkheid bij de TA’s te kunnen verschaffen.
Daarbij had ik enige moeite met het overzichtelijk vormgeven van het UX/UI design, voor mijzelf is het in ieder geval helder hoe het uiteindelijke project eruit moet komen te zien.

11-12-2022
Ik ben het project begonnen met het definiëren van classes, hiervoor heb ik de documentatie van Django’s ‘Model Field Reference’ bekeken.
Het is me niet duidelijk hoe Django met foreign keys en ManyToManyfields werkt. Wel heb ik kunnen vinden dat Django automatisch een id aanmaakt en deze de primary key in de class maakt (indien niet anders aangegeven). Echter, wanneer je de bids in Acutions als foreign key neemt, weet ik niet hoe ik deze kan linken aan amounts in Bids. Ik denk door amount de primary key te maken in Bids.
Daarnaast heb ik geen idee welk field ik moet gebruiken voor category, ik wil namelijk dat de user enkel kan kiezen uit een dropdown menu. Daarom heb ik dit veld er voor nu uitgecomment. Toen ik verder ging in views met create_listing, bedacht ik me dat het niet ideaal is dat ik de prijs heb gesplitst in starting price en (current) bid. Deze voeg ik daarom samen tot prijs, hierdoor kun je eerst de prijs instantiëren en vervolgens laten updaten wanneer een geldig bod wordt gedaan. Dit heeft me wel laten denken over het toevoegen van een veld voor de hoogste bieder, al denk ik dat dit middels een inner join van Auctions en Bids omzeild kan worden.
Bovendien vraag ik me af waarom het niet nodig is om self te definiëren in de arguments voor de class, later gebruik je het wel voor __str__ bijvoorbeeld.

De rest van de dag heb ik een admin aangemaakt en de view create_listing aangemaakt. Zoals boven beschreven ben ik nog wel aan het strugglen met de opbouw van de classes.

## 12-12-2022
Ineens werkte mijn listing page niet meer, Julius heeft met me meegekeken maar snapte de error (404) ook niet aangezien de code goed was geschreven. Uit het niets werkte het ook weer wel. In de avond gebeurde dit weer ineens bij de listing view, sindsdien staat er ook ineens “Not signed in”. Terwijl, ik heb niets aan de code van layout.html veranderd of aan voorgeschreven code in views gezeten. Desondanks heb ik de listing pagina grotendeels kunnen uitwerken. Zo is de frontend op category en watchlist na, zo goed als klaar. Wat betreft de backend staat me meer werk te doen, ik krijg de comments en bids niet gelinkt aan de desbetreffende listing pagina. Hiervoor zal ik morgen een TA om hulp vragen.
Naast alle onverklaarbare errors die ik vandaag tegenkwam, had ik sowieso moeite met de rest van m’n project. Ik kreeg het niet voor elkaar om een link te maken van de index pagina naar een desbetreffende listing pagina ondanks dat ik dit ook heb moeten doen voor Wiki. Ik heb hier een flinke tijd met Max naar gekeken, en na vrijwel alles geprobeerd te hebben, hebben we een oplossing gevonden. Waar bij wiki entry voldoende was om naar te verwijzen omdat entry als variabele bestond, is id een attribuut van de class Auctions. Echter, listing.id binnen aanhalingstekens werd niet geaccepteerd. Daarom kon de link listing/{listing.id} geïmplementeerd worden door {url ‘listing’ id=listing.id}, op deze manier concatenate het goed in de urls functie.
Daarna heeft Max me geholpen met het attribuut category, ik wist niet welk veld ik hiervoor moest definiëren en hoe ik de categorieën mee kon geven. De uiteindelijke oplossing was om als admin categorieën aan te maken als admin en deze op te slaan in de class. Dan definieer je het veld als een Charfield en implementeer je in de HTML template een dropdown menu. Echter, bij het aanmaken van de class kregen we een error bij het aanmaken van de class. De terminal gaf 2 opties, zelf oplossen of het door het systeem laten afhandelen. Nadat de eerste mogelijkheid hetzelfde probleem gaf, kozen we voor de tweede. Dit resulteerde helaas in het crashen van de database, na een tijd onderzoeken hebben we de migrations en database verwijderd waardoor ik mijn oude code weer kon runnen. We besloten om dit even te laten liggen en op mijn hoofdprobleem te focussen: hoe moet ik de code verdelen over de templates en views. Ik wist niet waar ik moest beginnen met het implementeren van bids en comments. Max gaf me een zetje in de goede richting door aan te geven dat je idealiter enkel variabelen en lists meegeeft aan de template. Daarmee heb ik uiteindelijk de listing pagina tot dusver afgemaakt (frontend).

## 13-12-2022
Wanneer ik naar een listing navigeerde, werd de huidige user uitgelogd. Hierdoor kon ik niet zien of de code goed werd uitgevoerd op de voorgrond. Ik kon niet verder zonder hulp en vandaag was alleen Stephan aanwezig voor Django. Ik heb een aanvraag gedaan rond 11:15, en zo lang in de wachtrij gestaan dat Stephan inmiddels naar huis was (stond toen nog op plek 2). Ik zat dus behoorlijk vast.
Desondanks heb ik een poging gedaan verder te programmeren. Ook heb ik een poging gedaan tot het schrijven van de views om de watchlist, biedingen en comments werkend te krijgen. SQL beheers ik redelijk goed, daarom was dit nog tamelijk goed te doen. Echter, ik wist niet of het syntactisch correct was.
Bovendien heb ik in de tijd van het wachten wel een van m’n eigen vragen beantwoord, dat geeft dan wel weer voldoening. Het lukte mij niet om comments, bids en watchlist interactief te maken. Ik ben toen in de documentatie over URL dispatchers van Django gedoken. Daardoor kreeg ik een idee om dezelfde methode (als gisteren van de link in index) toe te passen, hierdoor verdween het gevreesde gele scherm.

## 14-12-2022
In de ochtend heb ik aan Adventure en Wiki gezeten omdat ik in de middag pas werkgroep Django had, hierna heb ik met Max kunnen kijken naar de fout dat de user telkens werd uitgelogd bij het bezoeken van een listing pagina. Het probleem heeft met het argument “user” te maken die al gelinkt is aan de class User, wat het daadwerkelijke probleem was is ons niet helder geworden. In ieder geval, het probleem was verholpen en ik kon mijn geschreven code verbeteren. Max heeft me daarna ook nog geholpen met de watchlist knop die niet werkte. Om samen het debuggen te doorlopen heeft me onwijs veel geleerd.

Zo viel me op dat sommige delen van de code waren vrij omslachtig of dubbelop. Zo had ik voor de watchlist twee if statements, terwijl door middel van filter dit teruggebracht kon worden naar één regel. Ook had ik een fout met het toevoegen van een instance met een foreign key. Blijkbaar hoef je niet het attribuut te specificeren maar moet er naar de instance in z’n geheel verwezen worden.

Op deze manier heb ik de rest van Commerce vrij soepel kunnen afmaken, ik wist hoe ik om moest gaan met de errors die ik kreeg door het debuggen met Max. Daarmee zijn de nodige specificaties voor Commerce nu af. Nadat ik Adventure afheb, doe ik nog een poging een aparte pagina voor watchlist en category te maken.
